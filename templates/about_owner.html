{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center mt-4">
    <div class="col-md-10 col-lg-8">
        <div class="card">
            <div class="card-body p-5">
                <h2 class="text-center mb-4">
                    <i class="bi bi-person-circle text-primary"></i> About Owner
                </h2>
                
                {% if owner_info %}
                <div class="text-center mb-4">
                    {% if owner_info['photo_filename'] %}
                    <img src="{{ url_for('static', filename='owner/' + owner_info['photo_filename']) }}" 
                         alt="Owner Photo" 
                         class="rounded-circle"
                         style="width: 150px; height: 150px; object-fit: cover; border: 3px solid var(--accent-color);">
                    {% else %}
                    <div class="rounded-circle bg-secondary d-inline-flex align-items-center justify-content-center"
                         style="width: 150px; height: 150px;">
                        <i class="bi bi-person" style="font-size: 4rem;"></i>
                    </div>
                    {% endif %}
                </div>

                <div class="text-center mb-4">
                    <h3>{{ owner_info['name'] }}</h3>
                    <p class="text-secondary">{{ owner_info['description'] }}</p>
                </div>

                <div class="mb-4">
                    <h5><i class="bi bi-envelope"></i> Contact</h5>
                    <p class="text-secondary">{{ owner_info['contact'] }}</p>
                </div>

                <div class="text-center">
                    <h5 class="mb-3">Connect With Me</h5>
                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                        {% if owner_info['telegram_link'] %}
                        <a href="{{ owner_info['telegram_link'] }}" target="_blank" 
                           class="btn btn-primary">
                            <i class="bi bi-telegram"></i> Telegram
                        </a>
                        {% endif %}
                        
                        {% if owner_info['instagram_link'] %}
                        <a href="{{ owner_info['instagram_link'] }}" target="_blank" 
                           class="btn" style="background: linear-gradient(135deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color: white;">
                            <i class="bi bi-instagram"></i> Instagram
                        </a>
                        {% endif %}
                    </div>
                </div>

                {% if is_admin %}
                <hr class="my-4">
                <div class="text-center">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#editOwnerModal">
                        <i class="bi bi-pencil"></i> Edit Information
                    </button>
                </div>
                {% endif %}
                {% endif %}

                <div class="text-center mt-4">
                    <a href="{{ url_for('index') }}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Back to Home
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% if is_admin %}
<!-- Edit Owner Modal -->
<div class="modal fade" id="editOwnerModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Owner Information</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form method="POST" enctype="multipart/form-data">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="name" name="name" 
                               value="{{ owner_info['name'] }}" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="description" 
                                  rows="3" required>{{ owner_info['description'] }}</textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="contact" class="form-label">Contact</label>
                        <input type="text" class="form-control" id="contact" name="contact" 
                               value="{{ owner_info['contact'] }}" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="telegram_link" class="form-label">Telegram Link</label>
                        <input type="url" class="form-control" id="telegram_link" name="telegram_link" 
                               value="{{ owner_info['telegram_link'] }}" placeholder="https://t.me/yourchannel">
                    </div>
                    
                    <div class="mb-3">
                        <label for="instagram_link" class="form-label">Instagram Link</label>
                        <input type="url" class="form-control" id="instagram_link" name="instagram_link" 
                               value="{{ owner_info['instagram_link'] }}" placeholder="https://instagram.com/yourprofile">
                    </div>
                    
                    <div class="mb-3">
                        <label for="mcq_link" class="form-label">MCQ Practice Link</label>
                        <input type="text" class="form-control" id="mcq_link" name="mcq_link" 
                               value="{{ owner_info['mcq_link'] }}" placeholder="/practice-mcq">
                    </div>
                    
                    <div class="mb-3">
                        <label for="photo" class="form-label">Profile Photo</label>
                        <input type="file" class="form-control" id="photo" name="photo" accept="image/*">
                        <small class="text-secondary">
                            Allowed formats: JPG, PNG. Max size: 5 MB
                        </small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-check-circle"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
